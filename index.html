<!DOCTYPE HTML>
<html>
	<head>
		<link rel="stylesheet" href="site.css">
	</head>
	
	<body>
		<menu-bar>
			<a href="#features">Features</a>
			<a href="#installing">Installing</a>
			<a href="#starting">Starting Scheduler</a>
			<a href="#connecting">Connecting to Scheduler</a>
			<a href="https://github.com/PotterProgrammer/Scheduler/raw/main/docs/Users%20Manual.pdf">User's Manual</a>
		</menu-bar>

	<the-rest>
	 
		<h1>Scheduler</h1>
		<sub-title>Automated Volunteer Scheduling</sub-title>
	<p>
		At one point, our church was using a subscription based software service to handle
		scheduling the volunteers who assisted with our weekly church services.  I wrote Scheduler to replace 
		the service and provide easier to use software that placed no additional cost on the church.
		We have been using that software for some time now, and I wanted to make this software freely
		available so that other churches could handle their own scheduling more
		easily and without the overhead of paying a third party software vendor
		a monthly subscription.
	</p>
	<p>
		Scheduler is a web based system that can be run on a church PC, or (if you set it up like in our church) 
		you can run it on a dedicated computer called a Raspberry Pi that costs about $50-$80 and is the about the 
		size of a deck of cards.  (I do not currently have access to a Mac, but it should be fairly easy to
		port to run on a Mac as well, if someone is interested.)  You have the option of running it on a PC as
		a program that you start and close only as needed, or you can run it continually so that it is always
		available any time you wish to create, or edit a schedule, or volunteers wish to update their information.
		Running Scheduler on a Raspberry Pi works particularly well for running the web service continually, as it has low
		power requirements, takes up extremely minimal space, and can be run without a monitor or keyboard.
	</p>
	<p>
		To use Scheduler, you begin by building a list of the positions that need
		to be filled each week. For instance, you might need  four people to
		help with communion, one person to read scripture, two greeters to meet
		people at the doors, etc. Then you build a list of people who have
		volunteered to serve in certain positions.  Perhaps Mary would be a
		greeter, but would also help with communion, while Tom woud like to
		read scripture. Once positions and volunteers have been entered, you
		simply ask the Scheduler program to create a schedule of volunteers for
		a set of dates, and it automatically finds people to fill each slot.
		The schedule can be viewed online or printed, and volunteers can be
		notified of their individual schedules.
	</p>

	<h2 id="features">Features</h2>
	<p>Scheduler has the following features:
		<ul>
			<li>Scheduler is accessible via the web, so administrators and volunteers can access it
				from their computers, tablets, or phones at any time.</li>
			<li>Volunteeers have the ability to set dates when they are unavailable, to avoid scheduling conflicts.</li>
			<li>Volunteers can optionally request to serve on specific dates.</li>
			<li>Schedules are generated automatically on request, but can be changed as needed, if conflicts arise.</li>
			<li>Schedules may be printed for any requested date.</li>
			<li>Scheduler allows volunteers to make updates to their own information:
				<ul>
					<li>Name</li>
					<li>Contact information</li>
					<li>Desired positions to serve</li>
					<li>Dates when unavailable</li>
					<li>Specific dates desired</li>
				</ul>
				which lessens the workload on the person responsible for scheduling.</li>
			<li>Scheduler allows sending custom schedules to each scheduled volunteer showing the dates
				when their service is requested and the roles that they will be filling.</li>
			<li>Scheduler can send weekly custom reminders to volunteers to let them know they are scheduled to volunteer</li>
			<li>Scheduler can send notices to volunteers, asking them to update their information (if needed)
				before a new schedule is generated.</li>
			<li>Scheduler uses Google Mail (gmail) to send email at no cost</li>
			<li>Scheduler can (optionally) send SMS messages for scheduling and reminders using the Twilio
				service. (This requires a Twilio account.  Twilio currently has no membership fee and charges
				a small fee for each message sent.)</li>
		</ul>
	</p>
	<h2 id="installing">Installing Scheduler</h2>
	<p>
		To set up Scheduler to run and be accessible via the web, you will need to:
		<ul>
			<li>Install the Scheduler software on a computer that has access to the internet.</li>
			<li>Provide a link from the internet to the computer where Scheduler is running.</li>
		</ul>
		Technically, the last step is not required, but without it, Scheduler
		will only be accessible from the location where Scheduler is installed.
		To be able to run it remotely or have volunteers access it from home,
		the last step is needed.
	</p>
	<h3>Installing Scheduler on a computer</h3>
	<p>
		Currently Scheduler may be installed on the following platforms:
		<ul>
			<li><a href="#windows_pc">Windows PC</a></li>
			<li><a href="#linux_computer">Linux PC</a></li>
			<li><a href="#raspberry_pi">Raspberry Pi</a></li>
		</ul>
		Though the installation methods are different for each, they each will be installing from the same code.
		Details for installing on each platform are listed below.
	</p>
	<indented-block>
	<h4 id="windows_pc">Installing on a Windows PC</h4>
	<p>
		To install Scheduler on a Windows machine, start by making a directory
		where the Scheduler code will live.  Next, you will need to download the
		Scheduler software from github using <a href="https://github.com/PotterProgrammer/Scheduler/archive/refs/heads/main.zip">this link</a>. 
		Open the zip file and copy the contents of the Scheduler-main folder to
		the directory on your machine that you set up for Scheduler. Next, open
		a terminal session, and type the following:
			<command-line>
				chdir <color-blue>&lt;your-scheduler-directory&gt;</color-blue><br>
				Installing\windows_install
			</command-line>
		where <color-yellow>&lt;your-scheduler-directory&gt;</color-yellow> is replaced by the name
		of the directory you created.
	</p>
	<p>
		This will start the installation process.  Scheduler is written in a
		computer language named Perl.  So as part of the installation process,
		the <b>windows-install</b> program will download a local copy of the
		Perl language.  It will then install Perl modules needed by the
		Scheduler program.  This step may take as much as 5-10 minutes.
		Finally, the program will create the command to start Scheduler, a
		desktop icon to start Scheduler, and a command that you can run (if you
		wish) that will start Scheduler automatically on your computer whenever
		you log on.  When the program ends (if not errors were indicated) then
		Scheduler is installed and ready to run.
	</p>

	<h4 id="linux_computer">Installing on a Linux Computer</h4>
	<p>
		To install Scheduler on a Linux machine, you will need to use an
		account that has <b>sudo</b> privelege so that you can install the
		needed pieces, if they are not already on your system.  Begin by making a directory
		to store the Scheduler program and its needed files.  For instance
		<command-line>mkdir Scheduler</command-line>
		Next, download the Scheduler software from github using <a href="https://github.com/PotterProgrammer/Scheduler/archive/refs/heads/main.zip">this link</a>. 
		Once the file is downloaded, you will need to unzip the contents of the file and place
		them in the directory that you just created.  Note that the .zip file
		that github builds places everything under a folder with the name of
		the repository and the branch (in this case, "Scheduler-main").  It is
		the contents of the Scheduler-main directory that we are interested in.
		Once you have extracted the contents of the .zip file, change to the
		directory where the code is located. The contents of the folder should
		look something like this:
		<pre>
BuildSchedule.pm  email         public          sms
cpanfile          Installing    SaveRestore.pm  startup_scheduler.cfg
Dockerfile        LICENSE       Scheduler       templates
docs              Messaging.pm  Session.vim
			</pre>
	</p>
	<p>
		To install the needed system components, switch to the
		<b>Installing</b> directory. By default, the Scheduler web server
		listens to port 3000 for incoming connections.  If you would prefer to
		use a different port number, you can supply it when running the install
		command.  Type either
			<command-line>./linux_install.sh</command-line>
		to install Scheduler to listen to the default port of 3000, or
			<command-line>./linux_install.sh <color-blue>##</color-blue></command-line>
		where <b>##</b> is the port number you wish to use instead.
	</p>
	<p>
		The program will begin by making sure that your system has the pieces
		needed to run the Scheduler on your system. The script uses <b>sudo</b> 
		to install the components, and so sudo will ask you to enter your password
		before it starts installing the needed pieces.  It will install some developer
		related pieces like "make", the C++ compiler, and the Perl, as well as few system libraries.
		Then, the script will install the Perl modules needed by Scheduler, if they are
		not already on your system.  Finally, it will set up the <b>startScheduler</b>
		script, which you will use to start Scheduler, and it will setup your
		system to automatically launch Scheduler each time your system reboots.
		Depending on your system and internet speed, this may go very quickly
		or might take significantly longer.
	</p>
	<p>
		If the script ran without errors, Scheduler is now installed on your system.
	</p>

	<h4 id="raspberry_pi">Installing on a Raspberry Pi</h4>
	<p>
		If you want to install Scheduler to run on a Raspberry Pi, you have two
		options.  If you already have a Raspberry Pi that is running and you
		simply want to add Scheduler to it, then you can follow the instructions
		above for <a href="#linux_computer">Installing on a Linux Computer</a>.
		If, however, you are starting with a Raspberry Pi that you intend to
		dedicate to running Scheduler, then you may use this procedure.
	</p>
	<p>
		Rather than using a hard drive, the Raspberry Pi uses a micro SD to
		store the operating system and files.  So to install the OS, one
		normally downloads an ISO and burns it to the SD card.  To make
		installation easy for those looking to set up a Raspberry Pi for running
		Scheduler, I have provided an ISO which has the lastest version of the
		Raspberry Pi OS as well as Scheduler installed and ready to use.
		You can find the latest full image at <a href="https://potterprogrammer.github.io.com/somehwere">this link</a>.
		Download the image to your computer and unzip it.  
	</p>
	<p>
		You will then need a program to burn the ISO image to the SD card.  An
		excellent candidate for this task is the Imager application provided by
		the Raspberry Pi group.  You can find the Imager program (which runs on
		Windows, Linux, or Mac) <a href="https://www.raspberrypi.com/software/">
		here</a> and directions for using it <a href="https://www.raspberrypi.com/documentation/computers/getting-started.html#raspberry-pi-imager">
		here</a>.  If you are using the Image program to copy the ISO
		to the SD card that when selecting the OS to install, you should scroll
		to the bottom of the list and select "Custom OS" and then select the
		unzipped Scheduler ISO that you downloaded.
	</p>
	<p>
		Your new system will already have a user set up named
		<b><i>scheduler</i></b> and its initial password will be <b><i>reschedule</i></b>.  It
		is recommended that you change the password for the account.  When
		logged into the Scheduler account, you will find the Sheduler program
		installed in the Scheduler directory.  Scheduler will be already
		configured to run as a service, listening to port 3000 by default.
	</p>
	</indented-block>
	<h2 id="starting">Starting Scheduler</h2>
	<p>
		Once Scheduler has been installed on your computer, it is ready to be started.
		You have two choices.  You can run it as a program whenever you need it, or you 
		can have it run whenever your computer is started.  (If you used the downloaded
		image file to install Scheduler on a Raspberry Pi, then it is already set up to 
		start Scheduler whenever the Raspberry Pi is powered up.)
	</p>
	<p>
		If you would like to run it simply as needed, then see if there is a
		Scheduler icon that was added to your desktop during the installation. (Depending
		on your particular system, it may not have been.)  If the icon is on your desktop,
		you can use that to start Scheduler.  If there is no Scheduler icon set up on your
		desktop, then open a command prompt, change to the directory where you installed
		Scheduler, and type:
			<command-line>startScheduler</command-line>
		and Scheduler will start.
	</p>
	<p>
		If you would prefer to have Scheduler always start automatically whenever
		your computer starts up, then open a commd prompt, change to the directory
		where you installed Scheduler, and type:
			<command-line>autoStartScheduler</command-line>
		and your computer will be configured to start Scheduler for you 
		automatically whenever your computer is rebooted.
	</p>

	<h2 id="connecting">Connecting to Scheduler</h2>
	<p>
		Once Scheduler has been started, you can connect to it
		via a web browser to begin scheduling.  How you connect
		will depend some on where you are connecting from, <a href="#local">
		the computer where Scheduler is running</a>, <a href="#office">other
		computers in the office network</a>, or <a href="#internet">via
		the internet</a>.
	</p>
		<indented-block>
		<h3 id="local">From the computer where Scheduler is running</h3>
			<p>
				No additional setup or information is needed to connect
				to Scheduler from the machine where it is running.  Simply
				start a web browser on that machine, and in the address
				bar, type:
				<command-line>localhost:3000/</command-line>
				and you will be connected to the Scheduler server running
				on that machine.
			</p>
		</h3>
		<h3 id="office">From other computers in the office network</h3>
			<p>
				Some additional information (and perhaps setup) is needed
				before you can connect to Scheduler from other computers in
				the office.  You will need to find the IP address of the
				computer that is running Scheduler, and you <u>may</u>
				need to modify a firewall on the Scheduler computer to
				allow incoming requests to be accepted.
			</p>
			<indented-block>
			<h4>Getting the IP address of the Scheduler machine</h4>
			<p>
				The way that you do this is different, depending on
				whether you are running Linux or Windows.  On a <b>Linux</b>
				machine, open a command prompt and type:
				<command-line>hostname -I </command-line>
				and it should respond with an IP address (for example:
				192.168.8.42).
			</p>
			<br>
			<br>
			<p>
				For a <b>Windows</b> machine, here is how you can locate the 
				IP address.  In the box with the magnifying
				glass at the bottom of the screen, type in
				<command-line>Network Connections</command-line>
				and press Enter.  In the list that pops up, select
				<b>Network Connections</b>.  In the Network Connections
				app, double click on the Etherenet entry.  In the Ethernet
				Status box that pops up, click on the <gray-button>Details</gray-button>
				button.  In the Network Connection Details box that pops
				up, find the IP address.  (In this example, it is 10.0.2.15 .)
				<img class="screenshot" src="screenshot1.png"/>
			</p>
			<br>
			<br>
			<p>
				If the computer that is running Scheduler does not have
				a firewall in place, then you should be able to access 
				Scheduler from other computers that are on the same local
				network by starting a browser and typing:
				<command-line>http://<color-red>IP Address</color-red>:3000</command-line>
				where <color-red>IP Address</color-red> is replaced by the 
				IP address of the machine where Scheduler is installed.  For
				example, if Scheduler were running on the Windows machine from the
				example above, you would type:
				<command-line>http://10.0.2.15:3000</command-line>
				in the address bar of the browser to connect to Scheduler.
			</p>
			<p>
				If the connection fails, there is a good chance that there is a 
				firewall installed on the machine where Scheduler is running.
				A firewall is a security mechanism that blocks outside connections
				from making their way into the system.  But they are typically
				designed to allow you to specify rules to allow connection requests
				on certain designated ports to take place.  (In the case of 
				Scheduler, the default port is 3000.)  Since there is an 
				assortment of different firewall software available, both 
				as part of anti-virus and internet security packages, and
				bundled as part of Windows, you will need to find the instructions
				for how to modify your particular firewall so that it will
				allow incoming TCP connections on port 3000.
			</p>
			</indented-block>
		<h3 id="internet">From the Internet</h3>
			<p>
				Connecting your computer to the internet allows both you
				and your volunteers to access Scheduler remotely at any
				time.  This usually is not too difficult to do, but, depending
				on how you connect to the internet, there are several
				different ways that you can do this.  Also, depending on 
				your internet provider, you may need their assistance as well.
			</p>
			<p>
				Just as you had to determine an in-office address for your
				computer and had to make sure that any firewalls on the PC
				allowed it to be accessed at port 3000, you may need to take
				similar steps to determine the "outside" address of your
				computer, and you may need to define rules in your router to
				allow it to direct incoming requests at a designated port 
				to port 3000 on the machine that is running Scheduler.  
			</p>
			<indented-block>
			<h4>If your internet provider made things easy...</h4>
			<p>
				To reach your computer running Scheduler via the internet,
				you will need to have an a "real" IP address that the "outside
				world" can use to connect to your computer.  Depending on your
				internet provider, this may be easy, or complicated.  In some
				cases, your office network may have what is referred to as a
				"dedicated" IP address.  A dedicated IP address never changes,
				which is good, but usually dedicated IP addresses require an
				additional fee.
			</p>
			<p>
				Many cable internet providers provide a "real" address to your
				office network, but that address may sometimes change.  This is
				sometimes referred to as a "dynamic" IP address.  If your
				internet provider gives you a dyamic address, most of the time
				you will used the same address to connect to Scheduler, but on
				occassion you may need to change the IP address you are using.
			</p>
			<p>
				If you are in either of these two situations, then you will need
				to determine the "real" IP address that is associated with your router
				and you will also need to modify the router configuration so that 
				it forwards incoming requests for port 3000 to port 3000 on the
				machine running Scheduler.  Since there are <u>many</u> different
				routers, I cannot tell you the specifics of how to make this change
				on your router.  You will need to either look on the internet or
				seek help from your internet provider on the specifcs of how to
				configure your particular monitor.  You will also need to determine the
				real address that the internet will use to connect to your router.
				This is very easy.  From a machine in your office, simply go to the 
				website <a href="http://whatismyipaddress.com">http://whatismyipaddress.com</a>.
				and it will show you the IP address used by your router.
			</p>
			<h4>And if they didn't...</h4>
			<p>
				A growing trend is for the internet provider not to give you a 
				"real" IP address at all.  (Called CGNAT, this type of networking
				allows the internet provider to let you access the internet, but
				makes it more difficult for the internet to access your computer.)
				If this is the type of internet connection that your internet provider
				supplies, then you will need to take another approach.  There are
				several different services that you can use to allow you to access
				your computer remotely.  Basically you will need to have a "relayer"
				running elsewhere on the internet that your computer will connect to.
				To reach your computer, people will use the IP address of the relayer,
				and it will forward the request to your computer.  One such service
				which I have used for this purpose in the past is a service called
				<a href="https://ngrok.com">ngrok</a>.  There is a nice blog 
				<a href="https://www.donaldsimpson.co.uk/2017/01/30/using-ngrok-to-work-around-carrier-grade-nat-cgnat/">
				here</a> which describes how it works and how to set it up.  If you
				are taking this approach and follwing the examples, remember to use
				port 3000 (not 80) when starting ngrok.
			</p>
			</indented-block>
		</indented-block>
	</the-rest>
	</body>
</html>

